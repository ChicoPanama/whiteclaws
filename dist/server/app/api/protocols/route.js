"use strict";(()=>{var e={};e.id=3309,e.ids=[3309],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9040:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>b,patchFetch:()=>v,requestAsyncStorage:()=>g,routeModule:()=>m,serverHooks:()=>y,staticGenerationAsyncStorage:()=>h});var o={};r.r(o),r.d(o,{GET:()=>p,POST:()=>_,dynamic:()=>c});var n=r(9303),a=r(8716),i=r(670),l=r(7070),s=r(6543),u=r(9692);let c="force-dynamic",d=s.Ryn({name:s.Z_8().min(1),slug:s.Z_8().min(1),description:s.Z_8().optional().nullable(),website_url:s.Z_8().url().optional().nullable(),twitter_handle:s.Z_8().optional().nullable(),logo_url:s.Z_8().url().optional().nullable(),category:s.Z_8().optional().nullable(),chain:s.Z_8().optional().nullable(),bountyPool:s.Rxh().default(0),severity:s.KmV(["critical","high","medium","low","informational"]).optional()});async function p(e){let{searchParams:t}=new URL(e.url),r=t.get("slug");try{let e=(0,u.e)();if(r){let{data:t,error:o}=await e.from("protocols").select("id,name,slug,description,immunefi_url,logo_url,chains,max_bounty,tvl,is_active,created_at,updated_at").eq("slug",r).maybeSingle();if(o)throw o;if(!t)return l.NextResponse.json({error:"Protocol not found"},{status:404});let n={id:t.id,name:t.name,slug:t.slug,description:t.description,website_url:t.immunefi_url,twitter_handle:null,logo_url:t.logo_url,category:null,chain:t.chains?.[0]??null,bountyPool:t.max_bounty??0,severity:null,is_active:t.is_active,submission_count:0,total_rewards_distributed:0,created_at:t.created_at,updated_at:t.updated_at};return l.NextResponse.json({protocol:n})}let{data:t,error:o}=await e.from("protocols").select("id,name,slug,description,immunefi_url,logo_url,chains,max_bounty,tvl,is_active,created_at,updated_at").order("name");if(o)throw o;let n=(t??[]).map(e=>({id:e.id,name:e.name,slug:e.slug,description:e.description,website_url:e.immunefi_url,twitter_handle:null,logo_url:e.logo_url,category:null,chain:e.chains?.[0]??null,bountyPool:e.max_bounty??0,severity:null,is_active:e.is_active,submission_count:0,total_rewards_distributed:0,created_at:e.created_at,updated_at:e.updated_at}));return l.NextResponse.json({protocols:n})}catch(e){return console.error("Error fetching protocols:",e),l.NextResponse.json({error:"Internal server error"},{status:500})}}async function _(e){try{let t=await e.json(),r=d.parse(t),o=(0,u.e)(),{data:n,error:a}=await o.from("protocols").insert({name:r.name,slug:r.slug,description:r.description??null,immunefi_url:r.website_url??null,logo_url:r.logo_url??null,chains:r.chain?[r.chain]:[],max_bounty:r.bountyPool??0,is_active:!0}).select("id,name,slug,description,immunefi_url,logo_url,chains,max_bounty,tvl,is_active,created_at,updated_at").single();if(a)throw a;let i={id:n.id,name:n.name,slug:n.slug,description:n.description,website_url:n.immunefi_url,twitter_handle:null,logo_url:n.logo_url,category:null,chain:n.chains?.[0]??null,bountyPool:n.max_bounty??0,severity:null,is_active:n.is_active,submission_count:0,total_rewards_distributed:0,created_at:n.created_at,updated_at:n.updated_at};return l.NextResponse.json({protocol:i},{status:201})}catch(e){if(e instanceof s.jmq)return l.NextResponse.json({error:"Validation error",details:e.issues},{status:400});return console.error("Error creating protocol:",e),l.NextResponse.json({error:"Internal server error"},{status:500})}}let m=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/protocols/route",pathname:"/api/protocols",filename:"route",bundlePath:"app/api/protocols/route"},resolvedPagePath:"/home/ubuntu/clawd/whiteclaws/app/api/protocols/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:g,staticGenerationAsyncStorage:h,serverHooks:y}=m,b="/api/protocols/route";function v(){return(0,i.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:h})}},9692:(e,t,r)=>{r.d(t,{e:()=>a});var o=r(2728),n=r(1615);function a(){let e=(0,n.cookies)();return(0,o.createServerClient)("https://placeholder.supabase.co","placeholder-key",{cookies:{get:t=>e.get(t)?.value,set(t,r,o){try{e.set({name:t,value:r,...o})}catch(e){}},remove(t,r){try{e.set({name:t,value:"",...r})}catch(e){}}}})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[9276,3637,5972,6543],()=>r(9040));module.exports=o})();